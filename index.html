<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Onlybard â€“ Go Live Check</title>

<style>
:root {
  --bg: #020617;
  --card: #020617;
  --border: #1e293b;
  --text: #e5e7eb;
  --accent: #38bdf8;
  --green: #16a34a;
  --yellow: #ca8a04;
  --red: #dc2626;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 40px;
}

.container {
  max-width: 900px;
  margin: auto;
}

header {
  text-align: center;
  margin-bottom: 28px;
}

h1 {
  color: var(--accent);
  margin-bottom: 6px;
}

.subtitle {
  opacity: 0.85;
  font-size: 15px;
}

.tagline {
  margin-top: 6px;
  font-size: 13px;
  opacity: 0.6;
}

.controls {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 25px;
}

select, button {
  padding: 12px 18px;
  font-size: 15px;
  border-radius: 10px;
  border: none;
}

select {
  background: #020617;
  color: var(--text);
  border: 1px solid var(--border);
}

button {
  background: var(--green);
  color: white;
  cursor: pointer;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

#statusCard {
  font-size: 24px;
  text-align: center;
  padding: 25px;
}

.safe { background: var(--green); }
.risky { background: var(--yellow); }
.bad { background: var(--red); }

.grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

.meter-label {
  margin-bottom: 6px;
  font-size: 14px;
  opacity: 0.8;
}

.meter-value {
  font-size: 22px;
  margin-bottom: 8px;
}

.meter-bar {
  height: 10px;
  background: #020617;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid var(--border);
}

.meter-fill {
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.6s ease;
}

pre {
  background: #020617;
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 15px;
  white-space: pre-wrap;
}

.copy-btn {
  margin-top: 8px;
  background: #020617;
  border: 1px solid var(--border);
  color: var(--text);
}

footer {
  text-align: center;
  margin-top: 40px;
  font-size: 14px;
  opacity: 0.6;
}

.hidden { display: none; }
</style>
</head>

<body>
<div class="container">

<header>
  <h1>ðŸŽ® Onlybard Go Live Check</h1>
  <div class="subtitle">Streamer internet test for OBS & Streamlabs</div>
  <div class="tagline">
    Looks legit when shared â€¢ Easy to read before going live
  </div>
</header>

<div class="controls">
  <select id="platform">
    <option value="twitch">Twitch</option>
    <option value="youtube">YouTube</option>
  </select>
  <button onclick="startTest()">Run Test</button>
</div>

<div id="results" class="hidden">

  <div id="statusCard" class="card"></div>

  <div class="grid">
    <div class="card">
      <div class="meter-label">Upload Speed</div>
      <div class="meter-value"><span id="upload">0</span> Mbps</div>
      <div class="meter-bar"><div id="uploadBar" class="meter-fill"></div></div>
    </div>

    <div class="card">
      <div class="meter-label">Ping</div>
      <div class="meter-value"><span id="ping">0</span> ms</div>
      <div class="meter-bar"><div id="pingBar" class="meter-fill"></div></div>
    </div>

    <div class="card">
      <div class="meter-label">Jitter</div>
      <div class="meter-value"><span id="jitter">0</span> ms</div>
      <div class="meter-bar"><div id="jitterBar" class="meter-fill"></div></div>
    </div>
  </div>

  <div class="card">
    <h3>ðŸŽ¥ OBS Settings</h3>
    <pre id="obs"></pre>
    <button class="copy-btn" onclick="copyText('obs')">Copy OBS</button>
  </div>

  <div class="card">
    <h3>ðŸŽ¬ Streamlabs Settings</h3>
    <pre id="streamlabs"></pre>
    <button class="copy-btn" onclick="copyText('streamlabs')">Copy Streamlabs</button>
  </div>

</div>

<footer>
  Made for streamers â€¢ Built by Onlybard
</footer>

</div>

<script>
async function pingTest() {
  const t = [];
  for (let i = 0; i < 8; i++) {
    const s = performance.now();
    await fetch("https://www.google.com/favicon.ico", { mode: "no-cors" });
    t.push(performance.now() - s);
  }
  return {
    avg: Math.round(t.reduce((a,b)=>a+b)/t.length),
    jitter: Math.round(Math.max(...t)-Math.min(...t))
  };
}

async function uploadTest() {
  const data = new Uint8Array(2 * 1024 * 1024);
  const s = performance.now();
  await fetch("https://httpbin.org/post",{method:"POST",body:data});
  return ((data.length*8)/((performance.now()-s)/1000)/1e6).toFixed(2);
}

function setBar(id, value, max) {
  document.getElementById(id).style.width =
    Math.min((value / max) * 100, 100) + "%";
}

function preset(upload, platform) {
  const max = platform === "twitch" ? 6 : 9;
  if (upload >= max*1.4) return `1080p60 @ ${max}000 kbps`;
  if (upload >= 4.5*1.4) return "720p60 @ 4500 kbps";
  if (upload >= 3*1.4) return "720p30 @ 3000 kbps";
  return null;
}

function status(upload, jitter) {
  if (upload >= 6 && jitter < 20) return ["ðŸŸ¢ SAFE TO GO LIVE","safe"];
  if (upload >= 4) return ["ðŸŸ¡ RISKY â€“ LOWER BITRATE","risky"];
  return ["ðŸ”´ DO NOT GO LIVE","bad"];
}

function obsText(p) {
  return p ? `Encoder: x264
Rate Control: CBR
Preset: Veryfast
Keyframe Interval: 2
Output: ${p}` : "Not recommended to stream";
}

function slText(p) {
  return p ? `Video Output: ${p}
Encoder: Hardware
Auto Bitrate: ON` : "Not recommended to stream";
}

function copyText(id){
  navigator.clipboard.writeText(document.getElementById(id).innerText);
  alert("Copied!");
}

async function startTest(){
  document.getElementById("results").classList.remove("hidden");

  const platform = document.getElementById("platform").value;
  const ping = await pingTest();
  const upload = await uploadTest();
  const p = preset(upload, platform);
  const s = status(upload, ping.jitter);

  const card = document.getElementById("statusCard");
  card.innerText = s[0];
  card.className = "card " + s[1];

  document.getElementById("upload").innerText = upload;
  document.getElementById("ping").innerText = ping.avg;
  document.getElementById("jitter").innerText = ping.jitter;

  setBar("uploadBar", upload, 10);
  setBar("pingBar", ping.avg, 200);
  setBar("jitterBar", ping.jitter, 100);
}
</script>

</body>
</html>
